<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title></title>
        <link rel="stylesheet" href="c.css">
        <script src="j.js"></script>
    </head>
    <body>
        <a href="index.html">
            <img src="v.png" alt="Voltar">
        </a>
        <p id="p0"></p>
        <p id="p1"></p>
        <fieldset id="f0" class="f"></fieldset>
        <p id="p2"></p>
        <p id="p3"></p>
        <p id="p4"></p>
        <!-- <fieldset id="f1" class="f"></fieldset> -->

        <script>
            let f,a,pic,r,u,b=[],q,n,cnt,m
            let t
            function ini(){
                f=[]
                f[0]=ig('f0')
                f[1]=ig('f1')

                q=[]
                q[0]=10

                t=[]
                t[0]=0
                t[1]=150
                t[2]=0
                t[3]=60
                t[4]=0
                t[5]=20
                t[6]=0
                t[7]=150
            }ini()

            function rei(){
                a=mt(2,0)
                if(a==0){
                    it(p0,'Claro')
                    cnt=0
                }else{
                     it(p0,'Escuro')
                     cnt=9
                }

                r=[]
                r[0]=250
                r[1]=250
                r[2]=250
                pic=[]
                u=mt(3,0)
                for(i=0;i<q[0];i++){
                    pic[i]='rgb('+r[0]+','+r[1]+','+r[2]+')'
                    if(u==0)r[0]-=10
                    else if(u==1)r[1]-=10
                    else r[2]-=10
                }

                n=[]
                for(let i=0;i<q[0];i++)n[i]=i
                sorte(n)
                // m0(n)
                m=0

                it(p1,'Tempo \u00A0\u00A0 : '+t[4]+' / '+t[5])

                c0(p2,'red')
                c1(p2,'white')
                it(p2,'Perdeu!')
                dpn(p2)
            }rei()

            for(let i=0;i<q[0];i++){
                b[i]=ie('button')
                ii(b[i],'b'+i)
                c0(b[i],pic[n[i]])
                idm(b[i],60)
                irg(b[i],3)
                ap(f[0],b[i])
                b[i].onclick=()=>{
                    if(a==0 && m==0){
                        if(n[i]==cnt){
                            dpn(b[i])
                            cnt++
                            if(cnt==10)m=1
                        }
                    }else{
                        if(n[i]==cnt){
                            dpn(b[i])
                            cnt--
                            if(cnt==-1)m=1
                        }
                    }
                }
            }

            function relo(){
                if(m!=1){
                    if(m==0)t[2]++
                    if(t[2]>t[3]){
                        t[2]=0
                        t[4]++
                        if(t[4]>t[5])m=2
                        
                        if(m==2){
                            for(let i=0;i<q[0];i++)c0(b[i],'black')
                            m=3
                            dpb(p2)
                        }
                    }
                    if(m==3){
                        t[6]++
                        if(t[6]>t[7]){
                            rei()
                            for(let i=0;i<q[0];i++){
                                c0(b[i],pic[n[i]])
                                dpi(b[i])
                            }
                            t[0]=0
                            t[4]=0
                            t[2]=0
                            t[5]=20
                            t[6]=0
                        }
                    }
                    it(p1,'Tempo \u00A0\u00A0 : '+t[4]+' / '+t[5])
                }
            }

            function at(){
                if(m==1){
                    t[0]++
                    if(t[0]>t[1]){
                        rei()
                        for(let i=0;i<q[0];i++){
                            c0(b[i],pic[n[i]])
                            dpi(b[i])
                        }
                        t[0]=0
                        t[4]=0
                        t[2]=0
                        t[5]--
                        t[6]=0
                    }
                }

                relo()
            }
            function rd(){
                at()
                window.requestAnimationFrame(rd)
            }
            rd()
        </script>
    </body>
</html>